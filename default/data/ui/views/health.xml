<form>
	<label>Add-On Health</label>
	<fieldset submitButton="true">
		<input type="time" token="mytime">
			<label>Time Range</label>
			<default>
				<earliest>-60m@m</earliest>
				<latest>now</latest>
			</default>
		</input>
		<input type="multiselect" token="source" >
			<label>source</label>
			<search>
				<query>index="_internal" source=*okta* | stats count by source | sort -count</query>
				<earliest>$mytime.earliest$</earliest>
				<latest>$mytime.latest$</latest>
			</search>	
			<fieldForLabel>source</fieldForLabel>
			<fieldForValue>source</fieldForValue>
			<choice value="*">All</choice>
			<prefix>(</prefix>
			<valuePrefix>source="</valuePrefix>
			<valueSuffix>"</valueSuffix>
			<delimiter> OR </delimiter>
			<suffix>)</suffix>
			<default>*</default>
		</input>
		<input type="multiselect" token="sourcetype" >
			<label>sourcetype</label>
			<search>
				<query>index="_internal" $source$ sourcetype=*okta* | stats count by sourcetype | sort -count</query>
				<earliest>$mytime.earliest$</earliest>
				<latest>$mytime.latest$</latest>
			</search>	
			<fieldForLabel>sourcetype</fieldForLabel>
			<fieldForValue>sourcetype</fieldForValue>
			<choice value="*">All</choice>
			<prefix>(</prefix>
			<valuePrefix>sourcetype="</valuePrefix>
			<valueSuffix>"</valueSuffix>
			<delimiter> OR </delimiter>
			<suffix>)</suffix>
			<default>*</default>
		</input>
		<input type="multiselect" token="pid" >
			<label>PID (Process ID)</label>
			<search>
				<query>index="_internal" $source$ $sourcetype$ | stats count by pid | sort -count</query>
				<earliest>$mytime.earliest$</earliest>
				<latest>$mytime.latest$</latest>
			</search>	
			<fieldForLabel>pid</fieldForLabel>
			<fieldForValue>pid</fieldForValue>
			<choice value="*">All</choice>
			<prefix>(</prefix>
			<valuePrefix>pid="</valuePrefix>
			<valueSuffix>"</valueSuffix>
			<delimiter> OR </delimiter>
			<suffix>)</suffix>
			<default>*</default>
		</input>
		<input type="multiselect" token="metric" >
			<label>Metric (Input Type)</label>
			<search>
				<query>index="_internal" $source$ $sourcetype$ | stats count by metric | sort -count</query>
				<earliest>$mytime.earliest$</earliest>
				<latest>$mytime.latest$</latest>
			</search>	
			<fieldForLabel>metric</fieldForLabel>
			<fieldForValue>metric</fieldForValue>
			<choice value="*">All</choice>
			<prefix>(</prefix>
			<valuePrefix>metric="</valuePrefix>
			<valueSuffix>"</valueSuffix>
			<delimiter> OR </delimiter>
			<suffix>)</suffix>
			<default>*</default>
		</input>
	</fieldset>
	<row>
		<panel>
		<table>
			<title>Processes with Errors</title>
				<search>
					<query>index="_internal" $source$ $sourcetype$ ERROR $pid$ $metric$ | table pid,_time,_raw | sort -_time</query>
					<earliest>$mytime.earliest$</earliest>
					<latest>$mytime.latest$</latest>
				</search>
			<option name="wrap">true</option>
			<option name="rowNumbers">false</option>
			<option name="dataOverlayMode">none</option>
			<option name="drilldown">cell</option>
			<option name="count">10</option>
		</table>
		</panel>
	</row>
	<row>
		<panel>
		<table>
			<title>All Processes</title>
				<search>
					<query>index="_internal" $source$ $sourcetype$ $pid$ $metric$ | table pid,_time,_raw | sort -_time</query>
					<earliest>$mytime.earliest$</earliest>
					<latest>$mytime.latest$</latest>
				</search>
			<option name="wrap">true</option>
			<option name="rowNumbers">false</option>
			<option name="dataOverlayMode">none</option>
			<option name="drilldown">cell</option>
			<option name="count">100</option>
		</table>
		</panel>
	</row>
</form>
